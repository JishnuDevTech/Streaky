<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Streaky - Build Lasting Habits</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Welcome/Dashboard Landing Screen -->
    <div id="welcomeScreen" class="screen">
        <div class="welcome-container">
            <div class="welcome-content">
                <div class="app-logo">
                    <svg class="logo-svg" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#FFD93D;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FF8E53;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="60" cy="60" r="55" fill="url(#logoGradient)" opacity="0.2"/>
                        <path d="M60 20 L70 45 L95 50 L77.5 67.5 L81 93 L60 80 L39 93 L42.5 67.5 L25 50 L50 45 Z" 
                              fill="url(#logoGradient)" stroke="#fff" stroke-width="2"/>
                        <circle cx="60" cy="60" r="15" fill="#FFD93D"/>
                        <text x="60" y="70" font-family="Space Mono" font-size="24" fill="#fff" text-anchor="middle" font-weight="700">S</text>
                    </svg>
                </div>
                <h1 class="welcome-title">Streaky</h1>
                <p class="welcome-subtitle">Your AI-Powered Habit Tracking Companion</p>
                <div class="welcome-actions">
                    <button id="welcomeLoginBtn" class="btn btn-primary-glow">Get Started</button>
                </div>
                <div class="welcome-features">
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“Š</span>
                        <span>Track Progress</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ”¥</span>
                        <span>Build Streaks</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ¯</span>
                        <span>Achieve Goals</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="screen">
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-header">
                    <div class="auth-logo">
                        <svg class="logo-svg-small" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="30" cy="30" r="27" fill="url(#logoGradient)" opacity="0.3"/>
                            <path d="M30 10 L35 22.5 L47.5 25 L38.75 33.75 L40.5 46.5 L30 40 L19.5 46.5 L21.25 33.75 L12.5 25 L25 22.5 Z" 
                                  fill="url(#logoGradient)"/>
                        </svg>
                    </div>
                    <h2>Welcome Back</h2>
                    <p>Sign in to continue your journey</p>
                </div>

                <div class="message-container">
                    <div class="success-message" id="loginSuccess"></div>
                    <div class="error-message" id="loginError"></div>
                </div>

                <form class="auth-form" id="loginForm">
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="emailInput" placeholder="you@example.com" autocomplete="email" required>
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="passwordInput" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required>
                            <button type="button" class="password-toggle" data-target="passwordInput">
                                <span class="eye-icon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">Sign In</button>
                    <button type="button" id="forgotPasswordBtn" class="btn btn-link">Forgot Password?</button>

                    <div class="divider"><span>or</span></div>

                    <button type="button" id="googleSignInBtn" class="btn btn-google">
                        <svg width="20" height="20" viewBox="0 0 48 48">
                            <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                            <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                            <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                            <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                        </svg>
                        Continue with Google
                    </button>

                    <div class="auth-switch">
                        Don't have an account? <button type="button" id="showSignupBtn" class="link-btn">Sign up</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Signup Screen -->
    <div id="signupScreen" class="screen">
        <div class="auth-container">
            <div class="auth-card">
                <button class="back-btn" id="backToLoginBtn">â† Back</button>
                
                <div class="auth-header">
                    <div class="auth-logo">
                        <svg class="logo-svg-small" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="30" cy="30" r="27" fill="url(#logoGradient)" opacity="0.3"/>
                            <path d="M30 10 L35 22.5 L47.5 25 L38.75 33.75 L40.5 46.5 L30 40 L19.5 46.5 L21.25 33.75 L12.5 25 L25 22.5 Z" 
                                  fill="url(#logoGradient)"/>
                        </svg>
                    </div>
                    <h2>Create Account</h2>
                    <p>Start your habit journey today</p>
                </div>

                <div class="message-container">
                    <div class="error-message" id="signupError"></div>
                </div>

                <form class="auth-form" id="signupForm">
                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" id="signupName" placeholder="John Doe" autocomplete="name" required>
                    </div>
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="signupEmail" placeholder="you@example.com" autocomplete="email" required>
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="signupPassword" placeholder="Minimum 6 characters" autocomplete="new-password" required>
                            <button type="button" class="password-toggle" data-target="signupPassword">
                                <span class="eye-icon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Confirm Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="signupConfirmPassword" placeholder="Confirm password" autocomplete="new-password" required>
                            <button type="button" class="password-toggle" data-target="signupConfirmPassword">
                                <span class="eye-icon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Forgot Password Screen -->
    <div id="forgotPasswordScreen" class="screen">
        <div class="auth-container">
            <div class="auth-card">
                <button class="back-btn" id="backToLoginFromForgotBtn">â† Back</button>
                
                <div class="auth-header">
                    <div class="auth-logo">ğŸ”‘</div>
                    <h2>Reset Password</h2>
                    <p>We'll send you reset instructions</p>
                </div>

                <div class="message-container">
                    <div class="success-message" id="forgotSuccess"></div>
                    <div class="error-message" id="forgotError"></div>
                </div>

                <form class="auth-form" id="forgotForm">
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="forgotEmail" placeholder="you@example.com" autocomplete="email" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Send Reset Link</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Dashboard Screen -->
    <div id="dashboardScreen" class="screen">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-content">
                <div class="nav-brand">
                    <svg class="nav-logo" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="20" cy="20" r="18" fill="url(#logoGradient)" opacity="0.3"/>
                        <path d="M20 7 L23 15 L31 17 L25.5 22.5 L27 31 L20 27 L13 31 L14.5 22.5 L9 17 L17 15 Z" 
                              fill="url(#logoGradient)"/>
                    </svg>
                    <span class="brand-text">Streaky</span>
                </div>
                <div class="nav-actions">
                    <button id="addStreakBtn" class="btn btn-add">
                        <span class="add-icon">+</span>
                        <span class="add-text">New Streak</span>
                    </button>
                    <button id="profileBtn" class="btn-profile">
                        <img id="profileImage" src="" alt="Profile" class="profile-img">
                        <span id="profileInitials" class="profile-initials"></span>
                    </button>
                    <button id="settingsBtn" class="btn-icon" title="Settings">âš™ï¸</button>
                    <button id="logoutBtn" class="btn-icon" title="Logout">ğŸšª</button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Stats Overview -->
            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalStreaks">0</div>
                        <div class="stat-label">Active Streaks</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“ˆ</div>
                    <div class="stat-info">
                        <div class="stat-value" id="longestStreak">0</div>
                        <div class="stat-label">Longest Streak</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-info">
                        <div class="stat-value" id="completedToday">0</div>
                        <div class="stat-label">Done Today</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ¯</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalDays">0</div>
                        <div class="stat-label">Total Days</div>
                    </div>
                </div>
            </div>

            <!-- Quick Start Section -->
            <section class="content-section">
                <div class="section-header">
                    <h3>ğŸš€ Quick Start</h3>
                    <p>Choose from popular habits</p>
                </div>
                <div id="predefinedStreaks" class="predefined-grid"></div>
            </section>

            <!-- Active Streaks Section -->
            <section class="content-section">
                <div class="section-header">
                    <h3>ğŸ”¥ Your Streaks</h3>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <span>ğŸ“Š</span> Grid
                        </button>
                        <button class="view-btn" data-view="calendar">
                            <span>ğŸ“…</span> Calendar
                        </button>
                    </div>
                </div>
                
                <!-- Grid View -->
                <div id="gridView" class="streaks-grid"></div>
                
                <!-- Calendar View -->
                <div id="calendarView" class="calendar-view" style="display: none;">
                    <div class="calendar-controls">
                        <button id="prevMonth" class="btn-month">â†</button>
                        <h4 id="currentMonth"></h4>
                        <button id="nextMonth" class="btn-month">â†’</button>
                    </div>
                    <div id="calendarGrid" class="calendar-grid"></div>
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <span class="legend-dot completed"></span> Completed
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot partial"></span> Partial
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot empty"></span> Not Done
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">ğŸ“Š</div>
                    <h3>No Active Streaks</h3>
                    <p>Start building great habits today!</p>
                    <button class="btn btn-primary" onclick="document.getElementById('addStreakBtn').click()">
                        Create Your First Streak
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Streak Modal -->
    <div id="addStreakModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Streak</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Habit Name *</label>
                    <input type="text" id="streakName" placeholder="e.g., Morning Meditation">
                </div>
                <div class="input-group">
                    <label>Goal (days) *</label>
                    <input type="number" id="streakDuration" placeholder="30" min="1" value="30">
                </div>
                <div class="input-group">
                    <label>Description</label>
                    <textarea id="streakDescription" placeholder="Why is this important to you?" rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label>Icon</label>
                    <div class="icon-picker">
                        <input type="text" id="streakIcon" value="ğŸ¯" maxlength="2" readonly>
                        <div class="icon-options">
                            <span class="icon-option" data-icon="ğŸ¯">ğŸ¯</span>
                            <span class="icon-option" data-icon="ğŸ’ª">ğŸ’ª</span>
                            <span class="icon-option" data-icon="ğŸ“š">ğŸ“š</span>
                            <span class="icon-option" data-icon="ğŸ§˜">ğŸ§˜</span>
                            <span class="icon-option" data-icon="ğŸ’§">ğŸ’§</span>
                            <span class="icon-option" data-icon="ğŸƒ">ğŸƒ</span>
                            <span class="icon-option" data-icon="ğŸ¨">ğŸ¨</span>
                            <span class="icon-option" data-icon="ğŸ’»">ğŸ’»</span>
                            <span class="icon-option" data-icon="ğŸµ">ğŸµ</span>
                            <span class="icon-option" data-icon="âœï¸">âœï¸</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelStreakBtn" class="btn btn-secondary">Cancel</button>
                <button id="createStreakBtn" class="btn btn-primary">Create Streak</button>
            </div>
        </div>
    </div>

    <!-- Streak Detail Modal -->
    <div id="streakDetailModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="detailStreakName"></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="detail-progress-ring">
                    <svg class="progress-ring" width="200" height="200">
                        <circle class="progress-ring-bg" cx="100" cy="100" r="85" fill="none" stroke="#2a2a3e" stroke-width="12"/>
                        <circle class="progress-ring-fill" cx="100" cy="100" r="85" fill="none" stroke="url(#logoGradient)" stroke-width="12" stroke-linecap="round" id="detailProgressCircle"/>
                        <text x="100" y="95" text-anchor="middle" font-size="36" font-weight="700" fill="#fff" id="detailProgressPercent">0%</text>
                        <text x="100" y="115" text-anchor="middle" font-size="14" fill="#888" id="detailProgressLabel">Complete</text>
                    </svg>
                </div>
                
                <div class="detail-stats-grid">
                    <div class="detail-stat">
                        <div class="detail-stat-icon">ğŸ”¥</div>
                        <div class="detail-stat-value" id="detailCurrentStreak">0</div>
                        <div class="detail-stat-label">Current Streak</div>
                    </div>
                    <div class="detail-stat">
                        <div class="detail-stat-icon">ğŸ“…</div>
                        <div class="detail-stat-value" id="detailTotalDays">0</div>
                        <div class="detail-stat-label">Total Days</div>
                    </div>
                    <div class="detail-stat">
                        <div class="detail-stat-icon">ğŸ¯</div>
                        <div class="detail-stat-value" id="detailTargetDays">0</div>
                        <div class="detail-stat-label">Goal</div>
                    </div>
                </div>
                
                <div class="detail-description" id="detailDescription"></div>
            </div>
            <div class="modal-footer">
                <button id="deleteStreakBtn" class="btn btn-danger">Delete Streak</button>
                <button class="modal-close btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>âš™ï¸ Settings</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Profile Section -->
                <div class="settings-section">
                    <h4>ğŸ‘¤ Profile</h4>
                    <div class="profile-settings">
                        <div class="profile-photo-section">
                            <div class="current-profile-photo">
                                <img id="settingsProfileImage" src="" alt="Profile">
                                <span id="settingsProfileInitials"></span>
                            </div>
                            <div class="profile-photo-actions">
                                <input type="file" id="profilePhotoInput" accept="image/*" style="display: none;">
                                <button id="uploadPhotoBtn" class="btn btn-secondary">Upload Photo</button>
                                <button id="removePhotoBtn" class="btn btn-link">Remove</button>
                            </div>
                        </div>
                        <div class="profile-info">
                            <div class="info-item">
                                <span class="info-label">Email:</span>
                                <span class="info-value" id="settingsUserEmail">user@example.com</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">User ID:</span>
                                <span class="info-value" id="settingsUserId">loading...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="settings-section">
                    <h4>ğŸ”” Notifications</h4>
                    <div class="settings-item">
                        <div class="setting-info">
                            <label>Daily Reminders</label>
                            <p class="setting-desc">Get reminded to complete your streaks</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dailyReminders">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-item" id="reminderTimeSection" style="display: none;">
                        <div class="setting-info">
                            <label>Reminder Time</label>
                            <input type="time" id="reminderTime" value="09:00">
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="setting-info">
                            <label>Streak Alerts</label>
                            <p class="setting-desc">Celebrate milestones and achievements</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="streakAlerts" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <div class="setting-info">
                            <label>Sound Effects</label>
                            <p class="setting-desc">Play sound when completing streaks</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="soundEffects">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Appearance -->
                <div class="settings-section">
                    <h4>ğŸ¨ Appearance</h4>
                    <div class="settings-item">
                        <div class="setting-info">
                            <label>Animations</label>
                            <p class="setting-desc">Enable smooth transitions and effects</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="enableAnimations" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Data & Privacy -->
                <div class="settings-section">
                    <h4>ğŸ’¾ Data & Privacy</h4>
                    <button class="btn btn-secondary full-width" id="exportDataBtn">
                        ğŸ“¥ Export My Data
                    </button>
                    <button class="btn btn-danger full-width" id="deleteAccountBtn">
                        âš ï¸ Delete Account
                    </button>
                </div>

                <!-- About -->
                <div class="settings-section">
                    <h4>â„¹ï¸ About</h4>
                    <div class="about-info">
                        <p><strong>Streaky</strong> - AI-Powered Habit Tracker</p>
                        <p>Version 2.0</p>
                        <p>Made with ğŸ”¥ for building better habits</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    
    <!-- App Scripts -->
    <script src="app.js"></script>
</body>
</html>
