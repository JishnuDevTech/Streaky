<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Single viewport meta, safe for iOS/Android -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Streaky - Track Your Daily Habits</title>
    <link rel="stylesheet" href="style.css">

    <!-- Optional: mobile-friendly fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
    <div class="login-container" style="padding: 1rem; display: flex; justify-content: center; align-items: center; min-height: 100vh;">
        <div class="login-card" style="width: 100%; max-width: 400px; padding: 2rem; box-sizing: border-box;">
            <div class="logo" style="text-align: center;">
                <div class="logo-icon" style="font-size: 3rem;">üî•</div>
                <h1 style="font-size: 1.8rem; margin: 0.5rem 0;">Streaky</h1>
            </div>
            <p class="tagline" style="text-align: center; font-size: 1rem; margin-bottom: 1.5rem;">Keep your streaks alive, one day at a time</p>
            
            <div class="success-message message" id="loginSuccess"></div>
            <div class="error-message message" id="loginError"></div>

            <form class="login-form" id="loginForm">
                <div class="input-group">
                    <input type="email" id="emailInput" placeholder="Email" autocomplete="email" required>
                </div>
                <div class="input-group password-group" style="position: relative;">
                    <input type="password" id="passwordInput" placeholder="Password" autocomplete="current-password" required>
                    <button type="button" class="password-toggle" data-target="passwordInput" tabindex="-1" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); border: none; background: none; cursor: pointer;">
                        <span class="eye-icon">üëÅÔ∏è</span>
                    </button>
                </div>

                <button type="submit" id="loginBtn" class="btn btn-primary" style="width: 100%; margin-top: 12px;">Sign In</button>
                <button type="button" id="forgotPasswordBtn" class="btn btn-link" style="margin-top: 8px;">Forgot Password?</button>
                <button type="button" id="showSignupBtn" class="btn btn-secondary" style="margin-top: 8px;">Create New Account</button>

                <div class="divider" style="margin: 16px 0; text-align: center; position: relative;">
                    <span style="background: #f5f5f5; padding: 0 8px;">or</span>
                    <hr style="position: absolute; top: 50%; left: 0; width: 100%; border: none; border-top: 1px solid #ccc; z-index: -1;">
                </div>

                <button type="button" id="googleSignInBtn" class="btn btn-google" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px;">
                    <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                        <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                        <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                        <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                        <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                    </svg>
                    Continue with Google
                </button>
            </form>
        </div>
    </div>
</div>


    <!-- Signup Screen -->
    <div id="signupScreen" class="screen">
        <div class="login-container">
            <div class="login-card">
                <button type="button" class="back-btn" id="backToLoginBtn">
                    ‚Üê Back to Sign In
                </button>
                
                <div class="logo">
                    <div class="logo-icon">üî•</div>
                    <h1>Join Streaky</h1>
                </div>
                <p class="tagline">Start building great habits today</p>
                
                <div class="error-message" id="signupError"></div>
                
                <form class="login-form" id="signupForm">
                    <div class="input-group">
                        <input type="text" id="signupName" placeholder="Full Name" autocomplete="name" required>
                    </div>
                    <div class="input-group">
                        <input type="email" id="signupEmail" placeholder="Email" autocomplete="email" required>
                    </div>
                    <div class="input-group password-group">
                        <input type="password" id="signupPassword" placeholder="Password (min 6 characters)" autocomplete="new-password" required>
                        <button type="button" class="password-toggle" data-target="signupPassword" tabindex="-1">
                            <span class="eye-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                    <div class="input-group password-group">
                        <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" autocomplete="new-password" required>
                        <button type="button" class="password-toggle" data-target="signupConfirmPassword" tabindex="-1">
                            <span class="eye-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                    
                    <button type="submit" id="signupBtn" class="btn btn-primary">Create Account</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Forgot Password Screen -->
    <div id="forgotPasswordScreen" class="screen">
        <div class="login-container">
            <div class="login-card">
                <button type="button" class="back-btn" id="backToLoginFromForgotBtn">
                    ‚Üê Back to Sign In
                </button>
                
                <div class="logo">
                    <div class="logo-icon">üîë</div>
                    <h1>Reset Password</h1>
                </div>
                <p class="tagline">Enter your email to receive reset instructions</p>
                
                <div class="success-message" id="forgotSuccess"></div>
                <div class="error-message" id="forgotError"></div>
                
                <form class="login-form" id="forgotForm">
                    <div class="input-group">
                        <input type="email" id="forgotEmail" placeholder="Email" autocomplete="email" required>
                    </div>
                    
                    <button type="submit" id="resetPasswordBtn" class="btn btn-primary">Send Reset Link</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboardScreen" class="screen">
        <nav class="navbar">
            <div class="nav-content">
                <div class="nav-brand">
                    <div class="logo-icon small">üî•</div>
                    <span>Streaky</span>
                </div>
                <div class="nav-actions">
                    <button id="addStreakBtn" class="btn btn-add">+ New Streak</button>
                    <button id="settingsBtn" class="btn-settings" title="Settings">‚öôÔ∏è</button>
                    <button id="logoutBtn" class="btn btn-logout">Logout</button>
                </div>
            </div>
        </nav>

        <main class="dashboard">
            <div class="dashboard-header">
                <h2>Your Streaks</h2>
                <p class="subtitle">Keep the fire burning üî•</p>
            </div>

            <div class="predefined-section">
                <h3>Quick Start</h3>
                <div id="predefinedStreaks" class="predefined-streaks"></div>
            </div>

            <div class="streaks-section">
                <h3>Active Streaks</h3>
                <div id="streaksContainer" class="streaks-grid"></div>
                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">üìä</div>
                    <p>No active streaks yet</p>
                    <p class="empty-subtitle">Start tracking your habits today!</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Streak Modal -->
    <div id="addStreakModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Streak</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Activity Name</label>
                    <input type="text" id="streakName" placeholder="e.g., Morning Meditation">
                </div>
                <div class="input-group">
                    <label>Target Duration (days)</label>
                    <input type="number" id="streakDuration" placeholder="30" min="1" value="30">
                </div>
                <div class="input-group">
                    <label>Description (optional)</label>
                    <input type="text" id="streakDescription" placeholder="Why this matters to you">
                </div>
                <div class="input-group">
                    <label>Icon (emoji)</label>
                    <input type="text" id="streakIcon" placeholder="üéØ" maxlength="2" value="üéØ">
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelStreakBtn" class="btn btn-secondary">Cancel</button>
                <button id="createStreakBtn" class="btn btn-primary">Create Streak</button>
            </div>
        </div>
    </div>

    <!-- Streak Detail Modal -->
    <div id="streakDetailModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="detailStreakName"></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="detail-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="detailCurrentStreak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="detailTotalDays">0</div>
                        <div class="stat-label">Total Days</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="detailCompletion">0%</div>
                        <div class="stat-label">Completion</div>
                    </div>
                </div>
                <div class="detail-progress">
                    <div class="progress-ring-container">
                        <svg class="progress-ring" width="200" height="200">
                            <circle class="progress-ring-circle-bg" cx="100" cy="100" r="90"></circle>
                            <circle class="progress-ring-circle" cx="100" cy="100" r="90" id="detailProgressCircle"></circle>
                        </svg>
                        <div class="progress-ring-text">
                            <span id="detailProgressPercent">0%</span>
                        </div>
                    </div>
                </div>
                <div class="detail-description" id="detailDescription"></div>
            </div>
            <div class="modal-footer">
                <button id="deleteStreakBtn" class="btn btn-danger">Delete Streak</button>
                <button class="modal-close btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content large">
            <div class="modal-header">
                <h3>‚öôÔ∏è Settings</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-content">
                    <div class="user-info">
                        <div class="user-email" id="settingsUserEmail">user@example.com</div>
                        <div class="user-id" id="settingsUserId">User ID: loading...</div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Notifications</h4>
                        <div class="settings-item">
                            <label>Daily Reminders</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="dailyReminders">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="settings-item">
                            <label>Streak Alerts</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="streakAlerts" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Display</h4>
                        <div class="settings-item">
                            <label>Animations</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="enableAnimations" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="settings-item">
                            <label>Sound Effects</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="soundEffects">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Data</h4>
                        <div class="settings-item">
                            <button class="btn btn-secondary" id="exportDataBtn">Export My Data</button>
                        </div>
                        <div class="settings-item">
                            <button class="btn btn-danger" id="deleteAccountBtn">Delete Account</button>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>About</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">
                            Streaky v1.0<br>
                            Made with üî• for habit tracking
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- App Script -->
    <script src="app.js"></script>
    <script src="mobile.js"></script>
</body>
</html>